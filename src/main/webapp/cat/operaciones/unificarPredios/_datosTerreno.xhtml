<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:var="http://xmlns.jcp.org/jsf/composite/components/predios">
   <ui:composition>
        <h:panelGroup layout="block" class="Container Wid100 MarTop20">

            <div class="Container100">
                <p:fieldset legend="Caraster&iacute;sticas f&iacute;sicas del terreno" toggleable="true" toggleSpeed="500" >
                    <h:panelGrid columns="4" class="Wid100">
                        <var:varDisInputText id="terreno_estado" label="Estado:"
                                             table="cat_terreno" column="estado"
                                             bind="#{unificarPredioView.terreno.estado}"
                                             showlabel="true"
                                             defaultValue="3"
                                             changeOnEnter="true"
                                             next="terreno_pisos_terminados"
                                             labelPosition="top"/>
                         <h:panelGroup layout="block" style="width: 160px !important;">
                            <p:outputLabel for="terreno_pisos_terminados" value="Pisos terminados:" class="DispBlock Wid100" />
                            <p:inputText id="terreno_pisos_terminados" value="#{unificarPredioView.terreno.pisosTerminados}"
                                         class="input_180" onkeypress="validateIntegerValueAndFocusNext(event, 'terreno_ubicacion:cat_terreno-ubicacion-input')"/>
                        </h:panelGroup>
                        <var:varDisInputText id="terreno_ubicacion" label="Ubicaci&oacute;n:"
                                             table="cat_terreno" column="ubicacion"
                                             bind="#{unificarPredioView.terreno.ubicacion}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_topografia:cat_terreno-topografia-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_topografia" label="Topograf&iacute;a:"
                                             table="cat_terreno" column="topografia"
                                             bind="#{unificarPredioView.terreno.topografia}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_geometria:cat_terreno-geometria-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_geometria" label="Geometr&iacute;a:"
                                             table="cat_terreno" column="geometria"
                                             bind="#{unificarPredioView.terreno.geometria}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_nro_frentes"
                                             labelPosition="top"/>
                        <h:panelGroup layout="block" style="width: 160px !important;">
                            <p:outputLabel for="terreno_nro_frentes" value="Nro. frentes:" class="DispBlock Wid100" />
                            <p:inputText id="terreno_nro_frentes" value="#{unificarPredioView.terreno.nroFrentes}"
                                         class="input_180" onkeypress="validateIntegerValueAndFocusNext(event, 'terreno_caract:cat_terreno-caracteristicas_suelo-input')"/>
                        </h:panelGroup>
                        <var:varDisInputText id="terreno_caract" label="Caract. del suelo:"
                                             table="cat_terreno" column="caracteristicas_suelo"
                                             bind="#{unificarPredioView.terreno.caracteristicasSuelo}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_energia_electrica:cat_terreno-red_energia_electrica-input"
                                             labelPosition="top"/>
                    </h:panelGrid>
                </p:fieldset>
            </div>
        </h:panelGroup>
        <h:panelGroup layout="block" class="Container Wid100 MarTop20">
            <div class="Container100">
                <p:fieldset legend="Servicios en v&iacute;as" toggleable="true" toggleSpeed="500" >
                    <h:panelGrid columns="4" class="Wid100">
                        <var:varDisInputText id="terreno_energia_electrica" label="Red energ&iacute;a el&eacute;ctrica:"
                                             table="cat_terreno" column="red_energia_electrica"
                                             bind="#{unificarPredioView.terreno.redEnergiaElectrica}"
                                             showlabel="true"
                                             defaultValue="3"
                                             changeOnEnter="true"
                                             next="terreno_energia_electrica_medidor:comun-si_no-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_energia_electrica_medidor" label="Medidor de luz:"
                                             table="comun" column="si_no"
                                             bind="#{unificarPredioView.terreno.medidorLuz}"
                                             showlabel="true"
                                             defaultValue="0"
                                             changeOnEnter="true"
                                             next="terreno_agua_potable:cat_terreno-red_agua_potable-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_agua_potable" label="Red agua potable:"
                                             table="cat_terreno" column="red_agua_potable"
                                             bind="#{unificarPredioView.terreno.redAguaPotable}"
                                             showlabel="true"
                                             defaultValue="3"
                                             changeOnEnter="true"
                                             next="terreno_agua_potable_medidor:comun-si_no-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_agua_potable_medidor" label="Medidor de agua"
                                             table="comun" column="si_no"
                                             bind="#{unificarPredioView.terreno.medidorAgua}"
                                             showlabel="true"
                                             defaultValue="0"
                                             changeOnEnter="true"
                                             next="terreno_alcantarillado:cat_terreno-red_alcantarillado-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_alcantarillado" label="Red alcantarillado:"
                                             table="cat_terreno" column="red_alcantarillado"
                                             bind="#{unificarPredioView.terreno.redAlcantarillado}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_telefono:cat_terreno-red_telefonica-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_telefono" label="Red telef&oacute;nica:"
                                             table="cat_terreno" column="red_telefonica"
                                             bind="#{unificarPredioView.terreno.redTelefonica}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_alumbrado:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_alumbrado" label="Alumbrado público:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.alumbrado}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_recoleccion_basura:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_recoleccion_basura" label="Recolecci&oacute;n basura:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.recoleccionBasura}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_aseo_calle:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_aseo_calle" label="Aseo de calles:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.aseoCalles}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_transporte:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_transporte" label="Transporte público:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.transportePublico}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_cable:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_cable" label="Cable satelital:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.cableSatelital}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_internet:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_internet" label="Internet:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.internet}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_otros_servicio"
                                             labelPosition="top"/>
                        <h:panelGroup layout="block">
                            <p:outputLabel for="terreno_otros_servicio" value="Otros servicios:" class="DispBlock Wid100"/>
                            <p:inputText id="terreno_otros_servicio" value="#{unificarPredioView.terreno.otrosServicio}"
                                         class="input_150" onkeypress="focusNextOnEnter(event, 'terreno_tipo_via:cat_terreno-tipo_via-input')"/>
                        </h:panelGroup>
                    </h:panelGrid>
                </p:fieldset>
            </div>
        </h:panelGroup>
        <h:panelGroup layout="block" class="Container Wid100 MarTop20">
            <div class="Container100">
                <p:fieldset legend="Infraestructura vial" toggleable="true" toggleSpeed="500" >
                    <h:panelGrid columns="4" class="Wid100">
                        <var:varDisInputText id="terreno_tipo_via" label="Tipo de vía:"
                                             table="cat_terreno" column="tipo_via"
                                             bind="#{unificarPredioView.terreno.tipoVias}"
                                             showlabel="true"
                                             defaultValue="4"
                                             changeOnEnter="true"
                                             next="terreno_tipo_capa_rodadura:cat_terreno-tipo_capa_rodadura-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_tipo_capa_rodadura" label="Tipo capa rodadura:"
                                             table="cat_terreno" column="tipo_capa_rodadura"
                                             bind="#{unificarPredioView.terreno.tipoCapaRodadura}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_aceras:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_aceras" label="Aceras:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.aceras}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_bordillos:comun-tiene-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_bordillos" label="Bordillos:"
                                             table="comun" column="tiene"
                                             bind="#{unificarPredioView.terreno.bordillos}"
                                             showlabel="true"
                                             defaultValue="2"
                                             changeOnEnter="true"
                                             next="terreno_estado_conservacion:cat_terreno-estado_conservacion-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_estado_conservacion" label="Estado conservaci&oacute;n:"
                                             table="cat_terreno" column="estado_conservacion"
                                             bind="#{unificarPredioView.terreno.estadoConservacion}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="terreno_via_topografia:cat_terreno-via_topografia-input"
                                             labelPosition="top"/>
                        <var:varDisInputText id="terreno_via_topografia" label="Topograf&iacute;a:"
                                             table="cat_terreno" column="via_topografia"
                                             bind="#{unificarPredioView.terreno.viaTopografia}"
                                             showlabel="true"
                                             defaultValue="1"
                                             changeOnEnter="true"
                                             next="obra_piscina"
                                             labelPosition="top"/>
                    </h:panelGrid>
                </p:fieldset>
            </div>
        </h:panelGroup>
        <h:panelGroup layout="block" class="Container100 Wid100 MarTop20" >
            <div class="Container100">
                <p:fieldset legend="Linderos y mensuras seg&uacute;n levantamiento en campo" toggleable="true" toggleSpeed="500" >
                    <div class="Responsive Container50">
                        <div class="ContainerIndent MarRight20">
                            <h:panelGrid columns="4" class="linderoEscritura">
                                <p:outputLabel for="terreno_norte_ref" value="Norte:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_norte_ref" value="#{unificarPredioView.terreno.linNorteRef}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_norte_long')"
                                             class="input_200 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_norte_long" value="Con:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_norte_long" value="#{unificarPredioView.terreno.linNorteLongitud}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_sur_ref')"
                                             class="input_160" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_sur_ref" value="Sur:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_sur_ref" value="#{unificarPredioView.terreno.linSurRef}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_sur_long')"
                                             class="input_200 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_sur_long" value="Con:" class="DispBlock Wid100"/>
                                <p:inputText id="terreno_sur_long" value="#{unificarPredioView.terreno.linSurLongitud}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_este_ref')"
                                             class="input_160" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_este_ref" value="Este:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_este_ref" value="#{unificarPredioView.terreno.linEsteRef}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_este_long')"
                                             class="input_200 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_este_long" value="Con:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_este_long" value="#{unificarPredioView.terreno.linEsteLongitud}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_oeste_ref')"
                                             class="input_160" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_oeste_ref" value="Oeste:" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="terreno_oeste_ref" value="#{unificarPredioView.terreno.linOesteRef}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_oeste_long')"
                                             class="input_200 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel for="terreno_oeste_long" value="Con:" class="DispBlock Wid100"/>
                                <p:inputText id="terreno_oeste_long" value="#{unificarPredioView.terreno.linOesteLongitud}"
                                             onkeypress="focusNextOnEnter(event, 'terreno_superficie')"
                                             class="input_160" style="margin-bottom: 8px;"/>


                            </h:panelGrid>
                        </div>
                    </div>
                    <div class="Responsive Container50">
                        <div class="ContainerIndent">
                            <h:panelGrid columns="3" class="linderoEscritura">
                                <p:outputLabel for="terreno_superficie" value="Superficie:" class="DispBlock Wid100" />
                                <p:inputText id="terreno_superficie" value="#{unificarPredioView.terreno.areaLevantamiento}"
                                             onkeypress="validateFloatValueAndFocusNext(event, 'terreno_perimetro')" required="true"
                                             class="input_160 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel value="m&sup2;."/>
                                <p:outputLabel for="terreno_perimetro" value="Per&iacute;metro:&nbsp;" class="DispBlock Wid100" />
                                <p:inputText id="terreno_perimetro" value="#{unificarPredioView.terreno.perimetroLevantamiento}"
                                             onkeypress="validateFloatValueAndFocusNext(event, 'ancho_via_publica')"
                                             class="input_160 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel value="mts." />
                                <p:outputLabel for="ancho_via_publica" value="Ancho v&iacute;a p&uacute;blica:&nbsp;" class="DispBlock Wid100" />
                                <p:inputText id="ancho_via_publica" value="#{unificarPredioView.terreno.anchoViaPuplica}"
                                             onkeypress="validateFloatValueAndFocusNext(event, 'ancho_acera')"
                                             class="input_160 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel value="mts." />
                                <p:outputLabel for="ancho_acera" value="Ancho acera:&nbsp;" class="DispBlock Wid100" />
                                <p:inputText id="ancho_acera" value="#{unificarPredioView.terreno.anchoAcera}"
                                             onkeypress="validateFloatValueAndFocusNext(event, 'cat_terreno-observacion')"
                                             class="input_160 MarRight10" style="margin-bottom: 8px;"/>
                                <p:outputLabel value="mts." />
                                
                            </h:panelGrid>
                        </div>
                    </div>
                </p:fieldset>
            </div>
        </h:panelGroup>
        <h:panelGroup layout="block" class="Container100 Wid100 MarTop20" style="margin-bottom: 20px;">
            <div class="Container100">
                <p:fieldset legend="Sistema de coordenadas proyecci&oacute;n UTM DATUM WGS-84" toggleable="true" toggleSpeed="500" >
                    <div class="Responsive Container100">
                        <h1 class="BigTopic Fs15">Coordenada centroide del predio</h1>
                        <hr></hr>
                        <div class="ContainerIndent MarRight20">
                            <h:panelGrid columns="4" class="linderoEscritura">
                                <p:outputLabel for="x_este" value="X (Este):" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="x_este" value="#{unificarPredioView.terreno.cordX}"
                                             onkeypress="focusNextOnEnter(event, 'y_norte')"
                                             class="input_300 MarRight10" style="margin-bottom: 8px; margin-right: 30px;"/>
                                <p:outputLabel for="y_norte" value="Y (Norte):" class="DispBlock Wid100 Fright"/>
                                <p:inputText id="y_norte" value="#{unificarPredioView.terreno.cordY}"
                                             onkeypress="focusNextOnEnter(event, 'cat_terreno-observacion')"
                                             class="input_300" style="margin-bottom: 8px;"/>
                                </h:panelGrid>
                        </div>
                    </div>
                </p:fieldset>
            </div>
        </h:panelGroup>
         <h:panelGroup layout="block" class="Container Wid100 MarTop20">
            <p:fieldset legend="Usos del suelo del solar vacio" toggleable="true" toggleSpeed="500" >
                <h:panelGroup layout="block" class="Responsive Container100">
                    <div class="ContainerIndent Container100">
                        <h:panelGroup layout="block" class="actions" id="usosT-suelo-update">
                            <p:commandButton title="Adicionar uso"
                                             id="nuevo-usoT-btn"  styleClass="Fs16" update="usosT-dlg,usosT-form"
                                             icon="fa fa-plus white" actionListener="#{unificarPredioView.initNuevoUso()}"
                                             process="@this,usosT-suelo-update"
                                             value="Adicionar"
                                             class="Fleft"
                                             oncomplete="PF('usosTDialog').show();$('.ui-state-error').removeClass('ui-state-error');"
                                             style="margin-right: 10px; margin-bottom: 5px;"/>
                            
                            <p:commandButton title="Eliminar"
                                             id="eliminar-usoT-btn" styleClass="Fs16"
                                             icon="fa fa-trash white" actionListener="#{unificarPredioView.eliminarUso(false)}"
                                             class="Fleft"
                                             process="@this"
                                             update="usosT-list,usosT-dataTable,usosT-suelo-update"
                                             disabled="#{unificarPredioView.usosSueloTerreno.size() == 0}"
                                             value="Eliminar">
                                <p:confirm header="Confirmación" message="Está seguro de eliminar el uso del suelo #{unificarPredioView.usoSeleccionado.valorDiscreto.texto} del grupo #{unificarPredioView.usoSeleccionado.valorDiscreto.variable.nombre}.?" icon="ui-icon-alert" />
                            </p:commandButton>
                        </h:panelGroup>
                    </div>
                    <div class="ContainerIndent Container100 MarBot10" id="usosT-suelo">
                        <h:panelGroup layout="block" class="actions" id="usosT-list">
                            <p:dataTable id="usosT-dataTable" var="uso" value="#{unificarPredioView.usosSueloTerreno}" selection="#{unificarPredioView.usoSeleccionado}" rowKey="#{uso.cod}" style="margin-bottom:0"
                                         rows="5" paginator="true"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="5,10,15"
                                         paginatorPosition="bottom" selectionMode="single"
                                         emptyMessage="No existen usos del suelo registrados al terreno.">

                                <p:ajax event="rowSelect" listener="#{unificarPredioView.onRowSelectUso}" update="usosT-dataTable,usosT-suelo-update" />
                                <p:ajax event="rowUnselect" listener="#{unificarPredioView.onRowUnselectUso}" update="usosT-dataTable,usosT-suelo-update" />
                                <p:column headerText="Grupo">
                                    <h:outputText value="#{uso.valorDiscreto.variable.nombre}"  />
                                </p:column>
                                <p:column headerText="C&oacute;digo">
                                    <h:outputText value="#{uso.cod}"  />
                                </p:column>
                                <p:column headerText="Uso del suelo">
                                    <h:outputText value="#{uso.valorDiscreto.texto}"  />
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>
                    </div>
                </h:panelGroup>
            </p:fieldset>                        
        </h:panelGroup>
        
        <ui:include src="_formUsoSueloTerreno.xhtml"/>
    </ui:composition>
</html>